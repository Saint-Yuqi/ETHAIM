dataset:
  name: embedding_query2product
  path: ${paths.embedding_data}
  fields:
    language: PageLanguage
    query: OriginalQuery
    product_name: ProductName
    product_type: ProductType
    product_type_id: ProductTypeId
    level1_group: Level1_ProductGroup
    level4_group: Level4_ProductGroup
    brand: BrandName
    impressions: UniqueImpressions
    selects: UniqueSelects
  sampling:
    min_selects: 1
    min_impressions: 1
    max_rows: 300000
  split:
    method: predefined
    eval_ratio: 0.1
    train_ratio: 0.8
    val_ratio: 0.1
    test_ratio: 0.1
    frequency_bands:
      head_ratio: 0.1
      tail_ratio: 0.6
    stratify_by_language: true
    output_dir: ${paths.data_splits}
  batching:
    train_batch_size: 384
    eval_batch_size: 512
    max_query_length: 32
    max_product_length: 64
model:
  name: multilingual_e5_base
  base_model_name: intfloat/multilingual-e5-base
  pooling: mean
  projection_dim: 768
  use_prefix:
    query: 'query: '
    product: 'passage: '
train:
  num_epochs: 100
  warmup_ratio: 0.1
  num_workers: 4
  device: cuda
  output:
    dir: ${paths.output_dir}/e5-finetuned-v1
  logging:
    log_every_steps: 100
eval:
  max_queries: 1000
  max_products_per_query: 50
  metrics:
    hit_k: 10
seed: 42
paths:
  embedding_data: /home/c/yuqyan/code/ETHAIM/ETHAIM/embedding_query2product.parquet
  data_splits: ./data/splits
  output_dir: ./models
